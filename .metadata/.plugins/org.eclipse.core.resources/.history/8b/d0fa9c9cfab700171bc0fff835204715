package probability;

import java.util.ArrayList;
import java.util.Random;

public class Primes {
	public ArrayList printPrimes(){
		System.out.println(2);
		System.out.println(3);
		int n = 5;
		ArrayList lists = new ArrayList();
		lists.add(2);
		lists.add(3);
		lists.add(5);
		do{
			if(repeatMillRab(n, (int)(Math.log(n)/Math.log(2)))==true){
				System.out.println(n);
				lists.add(n);
			}
			n = n+2;
		}while(n<10000);
		return lists;
	}
	
	public boolean repeatMillRab(int n, int b){
		for(int i = 1; i<=b; i++){
			if(millRob(n)==false){
				return false;
			}
		}
		return true;
	}
	
	public boolean millRob(int n){
		Random rand= new Random();
		int a = rand.nextInt(n);
		a = 2 + a*(n-2-2)/n;
		return Btest(a, n);
	}
	
	public boolean Btest(int a, int n){
		int s = 0;
		int t = n-1;
		do{
			s++;
			t /= 2;
		}while(t%2!=1);
		int x = (int)Math.pow(a, t)%n;
		if(x==1||x==n-1){
			return true;
		}
		for(int i= 1; i<=s-1;i++){
			x = (x*x)%n;
			if(x==n-1){
				return true;
			}
		}
		return false;
	}
	
	public static void main(String[] args){
		Primes p = new Primes();
		ArrayList temp1 = new ArrayList();
		temp1 = p.printPrimes();
		System.out.println("the size of lists"+temp1.size());
	}
}
